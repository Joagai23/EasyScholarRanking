#pragma checksum "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "1841a3e549d26e8e558c2312a52759d716acbdf6"
// <auto-generated/>
#pragma warning disable 1591
namespace EasyScholarRanking.Views.RankingSearch
{
    #line hidden
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
using EasyScholarRanking.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
using EasyScholarRanking.Data;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
using ChartJs.Blazor;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
using ChartJs.Blazor.PieChart;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
using ChartJs.Blazor.Common;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
using System;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
    public partial class RankingSearch : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.OpenElement(0, "style");
            __builder.AddMarkupContent(1, "\r\n    .rank-form-container {\r\n        border: 2px solid #808080;\r\n        position: absolute;\r\n        top: 120px;\r\n        padding: 20px;\r\n        background-color: #f6f6f6;\r\n        z-index: 10;\r\n        opacity: ");
            __builder.AddContent(2, 
#nullable restore
#line 18 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
                   ToggleFormValue?1:0

#line default
#line hidden
#nullable disable
            );
            __builder.AddMarkupContent(3, ";\r\n        pointer-events: ");
            __builder.AddContent(4, 
#nullable restore
#line 19 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
                          ToggleFormValue?"auto":"none"

#line default
#line hidden
#nullable disable
            );
            __builder.AddMarkupContent(5, ";\r\n    }\r\n");
            __builder.CloseElement();
            __builder.AddMarkupContent(6, "\r\n\r\n\r\n");
            __builder.OpenElement(7, "div");
            __builder.AddAttribute(8, "class", "rank-form-container");
            __builder.OpenElement(9, "div");
            __builder.AddAttribute(10, "class", "rank-form");
            __builder.AddMarkupContent(11, "<b>Venue: </b><br>\r\n        ");
            __builder.OpenElement(12, "input");
            __builder.AddAttribute(13, "type", "text");
            __builder.AddAttribute(14, "list", "venueList");
            __builder.AddAttribute(15, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 27 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
                                                   Venue

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(16, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => Venue = __value, Venue));
            __builder.SetUpdatesAttributeName("value");
            __builder.CloseElement();
            __builder.AddMarkupContent(17, "<br>\r\n\r\n        ");
            __builder.OpenElement(18, "datalist");
            __builder.AddAttribute(19, "id", "venueList");
#nullable restore
#line 30 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
             foreach (Venue venue in venueList)
            {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(20, "option");
            __builder.AddContent(21, 
#nullable restore
#line 32 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
                          venue.Name

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
#nullable restore
#line 33 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
            }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(22, "\r\n\r\n        ");
            __builder.AddMarkupContent(23, "<b>Starting Year: </b><br>\r\n        ");
            __builder.OpenElement(24, "input");
            __builder.AddAttribute(25, "type", "number");
            __builder.AddAttribute(26, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 37 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
                                    MinYear

#line default
#line hidden
#nullable disable
            , culture: global::System.Globalization.CultureInfo.InvariantCulture));
            __builder.AddAttribute(27, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => MinYear = __value, MinYear, culture: global::System.Globalization.CultureInfo.InvariantCulture));
            __builder.SetUpdatesAttributeName("value");
            __builder.CloseElement();
            __builder.AddMarkupContent(28, "<br>\r\n\r\n        ");
            __builder.AddMarkupContent(29, "<b>Finishing Year: </b><br>\r\n        ");
            __builder.OpenElement(30, "input");
            __builder.AddAttribute(31, "type", "number");
            __builder.AddAttribute(32, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 40 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
                                    MaxYear

#line default
#line hidden
#nullable disable
            , culture: global::System.Globalization.CultureInfo.InvariantCulture));
            __builder.AddAttribute(33, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => MaxYear = __value, MaxYear, culture: global::System.Globalization.CultureInfo.InvariantCulture));
            __builder.SetUpdatesAttributeName("value");
            __builder.CloseElement();
            __builder.AddMarkupContent(34, "<br>\r\n\r\n        ");
            __builder.AddMarkupContent(35, "<b>Active Years: </b><br>\r\n        ");
            __builder.OpenElement(36, "input");
            __builder.AddAttribute(37, "type", "number");
            __builder.AddAttribute(38, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 43 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
                                    CareerLenght

#line default
#line hidden
#nullable disable
            , culture: global::System.Globalization.CultureInfo.InvariantCulture));
            __builder.AddAttribute(39, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => CareerLenght = __value, CareerLenght, culture: global::System.Globalization.CultureInfo.InvariantCulture));
            __builder.SetUpdatesAttributeName("value");
            __builder.CloseElement();
            __builder.AddMarkupContent(40, "<br>\r\n\r\n        ");
            __builder.AddMarkupContent(41, "<b>Number of entries: </b><br>\r\n        ");
            __builder.OpenElement(42, "input");
            __builder.AddAttribute(43, "type", "number");
            __builder.AddAttribute(44, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 46 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
                                    NumberEntries

#line default
#line hidden
#nullable disable
            , culture: global::System.Globalization.CultureInfo.InvariantCulture));
            __builder.AddAttribute(45, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => NumberEntries = __value, NumberEntries, culture: global::System.Globalization.CultureInfo.InvariantCulture));
            __builder.SetUpdatesAttributeName("value");
            __builder.CloseElement();
            __builder.AddMarkupContent(46, "<br>\r\n\r\n        ");
            __builder.AddMarkupContent(47, "<b>Location: </b><br>");
#nullable restore
#line 50 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
         if (LocationSearch.Equals("local"))
        {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(48, "select");
            __builder.AddAttribute(49, "class", "form-control");
            __builder.AddAttribute(50, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 52 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
                                                Location

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(51, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => Location = __value, Location));
            __builder.SetUpdatesAttributeName("value");
#nullable restore
#line 53 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
                 foreach (String location in locationList)
                {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(52, "option");
            __builder.AddContent(53, 
#nullable restore
#line 55 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
                             location

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
#nullable restore
#line 56 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
                }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
#nullable restore
#line 58 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
        }
        else
        {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(54, "input");
            __builder.AddAttribute(55, "type", "text");
            __builder.AddAttribute(56, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 61 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
                                      Location

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(57, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => Location = __value, Location));
            __builder.SetUpdatesAttributeName("value");
            __builder.CloseElement();
            __builder.AddMarkupContent(58, "<br>");
#nullable restore
#line 62 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
        }

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(59, "<b>Location Search: </b><br>\r\n        ");
            __builder.OpenElement(60, "label");
            __builder.AddAttribute(61, "class", "radio-inline");
            __builder.OpenElement(62, "input");
            __builder.AddAttribute(63, "type", "radio");
            __builder.AddAttribute(64, "name", "opradio");
            __builder.AddAttribute(65, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 65 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
                                                                                  (e => SetLocationSearch("dblp"))

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(66, "checked");
            __builder.CloseElement();
            __builder.AddContent(67, " Dblp Api ");
            __builder.CloseElement();
            __builder.AddMarkupContent(68, "\r\n        ");
            __builder.OpenElement(69, "label");
            __builder.AddAttribute(70, "class", "radio-inline");
            __builder.OpenElement(71, "input");
            __builder.AddAttribute(72, "type", "radio");
            __builder.AddAttribute(73, "name", "opradio");
            __builder.AddAttribute(74, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 66 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
                                                                                  (e => SetLocationSearch("local"))

#line default
#line hidden
#nullable disable
            ));
            __builder.CloseElement();
            __builder.AddContent(75, " Database");
            __builder.CloseElement();
            __builder.AddMarkupContent(76, "<br>\r\n\r\n        ");
            __builder.OpenElement(77, "input");
            __builder.AddAttribute(78, "type", "button");
            __builder.AddAttribute(79, "value", "Search Ranking");
            __builder.AddAttribute(80, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 68 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
                                                              (e => SetAuthorList())

#line default
#line hidden
#nullable disable
            ));
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(81, "\r\n\r\n\r\n");
            __builder.OpenElement(82, "div");
            __builder.AddAttribute(83, "class", "table-container");
            __builder.OpenElement(84, "table");
            __builder.AddAttribute(85, "class", "rank");
            __builder.AddMarkupContent(86, "<thead><tr><th id=\"col1-3\" class=\"rank\">Position</th>\r\n                <th id=\"col2\" class=\"rank\">Name</th>\r\n                <th id=\"col1-3\" class=\"rank\"># Publications</th></tr></thead>\r\n        ");
            __builder.OpenElement(87, "tbody");
#nullable restore
#line 83 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
             if (authorList != null && authorList.Count > 0)
            {
                int currentPosScore = authorList[0].Score;
                int currentPos = 1;
                for (int i = 0; i < authorList.Count; i++)
                {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(88, "tr");
            __builder.AddAttribute(89, "class", 
#nullable restore
#line 89 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
                                 authorList[i].Score>meanPublicationsTable?"above-mean":"below-mean"

#line default
#line hidden
#nullable disable
            );
#nullable restore
#line 90 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
                         if (currentPosScore > authorList[i].Score)
                        {
                            currentPos = (i + 1);
                            currentPosScore = authorList[i].Score;

#line default
#line hidden
#nullable disable
            __builder.OpenElement(90, "td");
            __builder.AddAttribute(91, "id", "col1-3");
            __builder.AddAttribute(92, "class", "rank");
            __builder.AddContent(93, 
#nullable restore
#line 94 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
                                                          currentPos

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
#nullable restore
#line 95 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
                        }
                        else
                        {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(94, "td");
            __builder.AddAttribute(95, "class", "rank");
            __builder.AddContent(96, 
#nullable restore
#line 98 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
                                              currentPos

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
#nullable restore
#line 99 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
                        }

#line default
#line hidden
#nullable disable
            __builder.OpenElement(97, "td");
            __builder.AddAttribute(98, "id", "col2");
            __builder.AddAttribute(99, "class", "rank");
            __builder.AddContent(100, 
#nullable restore
#line 100 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
                                                    authorList[i].Text

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(101, "\r\n                        ");
            __builder.OpenElement(102, "td");
            __builder.AddAttribute(103, "id", "col1-3");
            __builder.AddAttribute(104, "class", "rank");
            __builder.AddContent(105, 
#nullable restore
#line 101 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
                                                      authorList[i].Score

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 103 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"

                }
            }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(106, "\r\n\r\n\r\n");
            __builder.OpenElement(107, "div");
            __builder.AddAttribute(108, "class", "statistics");
#nullable restore
#line 113 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
     if (authorList != null)
    {

#line default
#line hidden
#nullable disable
            __builder.OpenElement(109, "div");
            __builder.AddAttribute(110, "class", "chart");
            __builder.OpenComponent<ChartJs.Blazor.Chart>(111);
            __builder.AddAttribute(112, "Config", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<ChartJs.Blazor.Common.ConfigBase>(
#nullable restore
#line 116 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
                           pieChart

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(113, "Height", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Int32?>(
#nullable restore
#line 116 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
                                             10

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(114, "Width", Microsoft.AspNetCore.Components.CompilerServices.RuntimeHelpers.TypeCheck<System.Int32?>(
#nullable restore
#line 116 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
                                                        10

#line default
#line hidden
#nullable disable
            ));
            __builder.CloseComponent();
            __builder.CloseElement();
#nullable restore
#line 118 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
    }
    else
    {

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(115, "<label>\r\n            Start searching to show your author charts!\r\n        </label>");
#nullable restore
#line 124 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
    }

#line default
#line hidden
#nullable disable
            __builder.CloseElement();
            __builder.AddMarkupContent(116, "\r\n\r\n\r\n");
            __builder.OpenElement(117, "div");
            __builder.AddAttribute(118, "class", "form-toggle");
            __builder.OpenElement(119, "input");
            __builder.AddAttribute(120, "type", "button");
            __builder.AddAttribute(121, "value", 
#nullable restore
#line 129 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
                                  ToggleFormValue?"Hide Form":"Show Form"

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(122, "disabled", 
#nullable restore
#line 129 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
                                                                                        IsLoading

#line default
#line hidden
#nullable disable
            );
            __builder.AddAttribute(123, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 129 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
                                                                                                              (e => ToggleForm())

#line default
#line hidden
#nullable disable
            ));
            __builder.CloseElement();
            __builder.AddMarkupContent(124, "\r\n    ");
            __builder.OpenElement(125, "div");
            __builder.AddAttribute(126, "class", "info-query");
            __builder.AddContent(127, 
#nullable restore
#line 131 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
         Query

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
#nullable restore
#line 136 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
 if (IsLoading)
{

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(128, "<div class=\"loading-message\" id=\"c1\">\r\n        Please wait...\r\n    </div>");
#nullable restore
#line 141 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
}

#line default
#line hidden
#nullable disable
        }
        #pragma warning restore 1998
#nullable restore
#line 144 "C:\Jorge\Universidad\5\EasyScholarRanking\Projects\EasyScholarRanking\EasyScholarRanking\Views\RankingSearch\RankingSearch.razor"
       

    //////////////////////////////////////////////////////////////////////////////////////////////////////// PROPERTIES

    // Form searching properties
    private string Venue = "";
    private string Location = "International";
    private int MinYear = 2019;
    private int MaxYear = 2020;
    private int NumberEntries = 8;
    private int CareerLenght = 0;
    private string LocationSearch = "";

    // Search variables
    private List<AuthorClass> authorList;
    private List<Venue> venueList;
    private List<String> locationList;
    private double meanPublicationsTable = 0;

    // Constants
    private double contributionPercentage = 0.015; //1.5%
    private double appereancePercentage = 0.35; //35%

    // UI properties
    private bool IsLoading = false;
    private bool ToggleFormValue = false;
    private PieConfig pieChart;
    private string Query;

    //////////////////////////////////////////////////////////////////////////////////////////////////////// FUNCTIONS

    private async void SetAuthorList()
    {
        if (!string.IsNullOrWhiteSpace(Venue) && MinYear > 0 && MaxYear > 0 && NumberEntries > 0 && CareerLenght >= 0 && !string.IsNullOrWhiteSpace(Location))
        {
            // Change UI
            IsLoading = true;
            ToggleForm();

            // Search ranking and wait until it is returned
            authorList = new List<AuthorClass>(NumberEntries);
            List<AuthorClass> list = await Task.Run(SearchRanking);

            authorList = list;

            // Paint cheese
            if (authorList != null)
            {
                pieChart.Data.Datasets.Clear();
                pieChart.Data.Labels.Clear();
                FillChart();
            }

            // Update UI
            IsLoading = false;
        }

        Query = DataHelper.GetRankingInfoQuery(Venue, Location, MinYear, MaxYear, NumberEntries, CareerLenght);

        // Tell application we have changed the UI, after awaiting the ranking it does not update automatically
        this.StateHasChanged();
    }

    private async Task<List<AuthorClass>> SearchRanking()
    {
        List<AuthorClass> list =  Data.SearchDblp.GetRankingSearch(DataHelper.ParseVenue(Venue, venueList), MinYear, MaxYear, NumberEntries, CareerLenght, Location, null, LocationSearch);

        return list;
    }

    // Toggle Searching Form
    private void ToggleForm()
    {
        ToggleFormValue = !ToggleFormValue;
    }

    // Change Location Search Type
    private void SetLocationSearch(string locationSearch)
    {
        LocationSearch = locationSearch;
    }

    // Configure pie chart and get venue list from json
    protected override void OnInitialized()
    {
        pieChart = new PieConfig
        {
            Options = new PieOptions
            {
                Responsive = true,
                Title = new OptionsTitle
                {
                    Display = true,
                    Text = "Authors Pie Chart",
                    FontSize = 16 // Default is 12
                },
                MaintainAspectRatio = false,
                Legend = new Legend
                {
                    Display = false
                }
            }
        };

        venueList = Data.JsonFileVenueService.GetVenues().ToList();
        locationList = DataHelper.GetLocalSearchLocations();
    }

    // Paint cheese wheel if data recovered is valid
    private void FillChart()
    {
        // Init dataset used for cheese wheel
        PieDataset<int> dataset = new PieDataset<int>();

        // Obtain number of authors and publications to calculate the mean
        int totalPublications = DataHelper.GetTotalPublications(authorList);
        int numberAuthors = authorList.Count;

        string meanText = DataHelper.GetMeanText(totalPublications, numberAuthors);
        meanPublicationsTable = DataHelper.GetMean(totalPublications, numberAuthors);

        pieChart.Options.Title.Text = "Authors Pie Chart" + meanText;

        int othersScore = 0;

        // Only paint if author data is valid, if not, paint some text above the wheel
        if (authorList.Count != 0)
        {
            int currentScore = authorList[0].Score;
            int numberOfAuthorsSameScore = DataHelper.CountAuthorByScore(currentScore, authorList);
            double currentScorePercentage = (double)currentScore / (double)totalPublications;
            double currentAppereancePercentage = (double)numberOfAuthorsSameScore / (double)NumberEntries;

            // Given a score get the amount of authors that share it and calculate the percentage among all the authors
            // If the score contributes to a minumum percentage of all the publications it is inserted in the dataset
            // If the number of authors sharing that score is below a minumum percentage it is inserted in the dataset
            foreach (AuthorClass author in authorList)
            {
                if (currentScore != author.Score)
                {
                    currentScore = author.Score;
                    numberOfAuthorsSameScore = DataHelper.CountAuthorByScore(currentScore, authorList);
                    currentScorePercentage = (double)currentScore / (double)totalPublications;
                    currentAppereancePercentage = (double)numberOfAuthorsSameScore / (double)NumberEntries;
                }

                if (currentScorePercentage > contributionPercentage || currentAppereancePercentage < appereancePercentage)
                {
                    double roundedPercentage = Math.Round(currentScorePercentage, 2) * 100;
                    int roundedIntegerPercentage = (int)roundedPercentage;

                    pieChart.Data.Labels.Add(author.Text + " - " + roundedIntegerPercentage + "%");
                    dataset.Add(author.Score);
                }
                else
                {
                    othersScore += author.Score;
                }
            }

            // Calculate values for "Others" and insert them in the dataset
            if (othersScore != 0)
            {
                double percentage = ((double)othersScore / (double)totalPublications) * 100;
                percentage = Math.Round(percentage, 2);

                pieChart.Data.Labels.Add("Others - " + (int)percentage + "%");
                dataset.Add(othersScore);
            }

            dataset.BackgroundColor = DataHelper.GetBackgroundColors(authorList.Count);
            dataset.BorderColor = "#808080";

            pieChart.Data.Datasets.Add(dataset);
        }
    }

#line default
#line hidden
#nullable disable
    }
}
#pragma warning restore 1591
